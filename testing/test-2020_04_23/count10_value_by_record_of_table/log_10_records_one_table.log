lin@lin-pc:~/apps/cassandra$ ./my-test-column-one.sh
#!/bin/sh -v
clear
export JAVA_HOME=/home/lin/apps/jdk13
export PATH=$JAVA_HOME/bin:$PATH
./tools/bin/cassandra-stress user profile="file:///home/lin/work-lanit/my_datana_cassandra/etc/kostya-one-column-table-cassandra-stress.yaml" n=10 "ops(insert=10,simple1=1)" truncate=always./tools/bin/cassandra-stress: 2: ./tools/bin/cassandra-stress: expert: not found
openjdk version "13.0.2" 2020-01-14
OpenJDK Runtime Environment (build 13.0.2+8)
OpenJDK 64-Bit Server VM (build 13.0.2+8, mixed mode, sharing)
******************** Stress Settings ********************
Command:
  Type: user
  Count: 10
  No Warmup: false
  Consistency Level: LOCAL_ONE
  Target Uncertainty: not applicable
  Command Ratios: {insert=10.0, simple1=1.0}
  Command Clustering Distribution: clustering=gaussian(1..10)
  Profile File: file:///home/lin/work-lanit/my_datana_cassandra/etc/kostya-one-column-table-cassandra-stress.yaml
Rate:
  Auto: true
  Min Threads: 4
  Max Threads: 1000
Population:
  Distribution: Gaussian:  min=1,max=10,mean=5,500000,stdev=1,500000
  Order: ARBITRARY
  Wrap: false
Insert:
  Revisits: Uniform:  min=1,max=1000000
  Visits: Fixed:  key=1
  Row Population Ratio: Ratio: divisor=1,000000;delegate=Fixed:  key=1
  Batch Type: not batching
Errors:
  Ignore: false
  Tries: 10
Log:
  No Summary: false
  No Settings: false
  File: null
  Interval Millis: 1000
  Level: NORMAL
Mode:
  API: JAVA_DRIVER_NATIVE
  Connection Style: CQL_PREPARED
  CQL Version: CQL3
  Protocol Version: V4
  Username: null
  Password: null
  Auth Provide Class: null
  Max Pending Per Connection: 128
  Connections Per Host: 8
  Compression: NONE
Node:
  Nodes: [localhost]
  Is White List: false
  Datacenter: null
Schema:
  Keyspace: stresscql_kostya_column_one
  Replication Strategy: org.apache.cassandra.locator.SimpleStrategy
  Replication Strategy Pptions: {replication_factor=1}
  Table Compression: null
  Table Compaction Strategy: null
  Table Compaction Strategy Options: {}
Transport:
  factory=org.apache.cassandra.thrift.TFramedTransportFactory; truststore=null; truststore-password=null; keystore=null; keystore-password=null; ssl-protocol=TLS; ssl-alg=SunX509; store-type=JKS; ssl-ciphers=TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA;
Port:
  Native Port: 9042
  Thrift Port: 9160
  JMX Port: 7199
Send To Daemon:
  *not set*
Graph:
  File: null
  Revision: unknown
  Title: null
  Operation: USER
TokenRange:
  Wrap: false
  Split Factor: 1

******************** Profile ********************
  Keyspace Name: stresscql_kostya_column_one
  Keyspace CQL:
***
CREATE KEYSPACE IF NOT EXISTS stresscql_kostya_column_one WITH replication = {'class': 'SimpleStrategy', 'replication_factor': 1};
***

  Table Name: t_kostya_one
  Table CQL:
***
CREATE TABLE t_kostya_one (
      sensor_name ascii,
      value double,
      published_date timestamp,
      PRIMARY KEY(sensor_name)
) WITH
  memtable_flush_period_in_ms=5000
  AND caching = { 'keys' : 'NONE', 'rows_per_partition' : '15000' };
***

  Extra Schema Definitions: [CREATE CUSTOM INDEX t_kostya_one_index_published_date_idx ON t_kostya_one (published_date) USING 'org.apache.cassandra.index.sasi.SASIIndex';]
  Generator Configs:
  Query Definitions:
    simple1: CQL:select * from t_kostya_one where published_date > ? LIMIT 15000;Fields:samerow;
  Token Range Queries:
  Insert Settings:
    partitions: fixed(15000)
    batchtype: UNLOGGED
    select: uniform(1..500)/500
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by com.datastax.shaded.netty.util.internal.PlatformDependent0 (file:/home/lin/apps/cassandra/lib/cassandra-driver-core-3.0.1-shaded.jar) to field java.nio.Buffer.address
WARNING: Please consider reporting this to the maintainers of com.datastax.shaded.netty.util.internal.PlatformDependent0
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
Connected to cluster: Test Cluster, max pending requests per connection 128, max connections per host 8
Datatacenter: datacenter1; Host: localhost/127.0.0.1; Rack: rack1
Created schema. Sleeping 1s for propagation.
Created extra schema. Sleeping 1s for propagation.
Generating batches with [15000..15000] partitions and [30..15000] rows (of [15000..15000] total rows in the partitions)

Sleeping 2s...
Warming up insert with 2 iterations...
Warming up simple1 with 2 iterations...
Thread count was not specified

Running with 4 threadCount
Truncated stresscql_kostya_column_one.t_kostya_one. Sleeping 1s for propagation.
Running [insert, simple1] with 4 threads for 10 iteration
type       total ops,    op/s,    pk/s,   row/s,    mean,     med,     .95,     .99,    .999,     max,   time,   stderr, errors,  gc: #,  max ms,  sum ms,  sdv ms,      mb
total,             1,       1,      13,      13,     6,1,     6,1,     6,1,     6,1,     6,1,     6,1,    0,8,  0,00000,      0,      0,       0,       0,       0,       0


Results:
Op rate                   :        1 op/s  [insert: 1 op/s]
Partition rate            :       13 pk/s  [insert: 13 pk/s]
Row rate                  :       13 row/s [insert: 13 row/s]
Latency mean              :    6,1 ms [insert: 6,1 ms]
Latency median            :    6,1 ms [insert: 6,1 ms]
Latency 95th percentile   :    6,1 ms [insert: 6,1 ms]
Latency 99th percentile   :    6,1 ms [insert: 6,1 ms]
Latency 99.9th percentile :    6,1 ms [insert: 6,1 ms]
Latency max               :    6,1 ms [insert: 6,1 ms]
Total partitions          :         10 [insert: 10]
Total errors              :          0 [insert: 0]
Total GC count            : 0
Total GC memory           : 0,000 KiB
Total GC time             :    0,0 seconds
Avg GC time               :    NaN ms
StdDev GC time            :    0,0 ms
Total operation time      : 00:00:00

Sleeping for 15s

Running with 8 threadCount
Truncated stresscql_kostya_column_one.t_kostya_one. Sleeping 1s for propagation.
Running [insert, simple1] with 8 threads for 10 iteration
type       total ops,    op/s,    pk/s,   row/s,    mean,     med,     .95,     .99,    .999,     max,   time,   stderr, errors,  gc: #,  max ms,  sum ms,  sdv ms,      mb
total,             1,       1,      11,      11,    16,8,    16,8,    16,8,    16,8,    16,8,    16,8,    0,9,  0,00000,      0,      0,       0,       0,       0,       0


Results:
Op rate                   :        1 op/s  [insert: 1 op/s]
Partition rate            :       11 pk/s  [insert: 11 pk/s]
Row rate                  :       11 row/s [insert: 11 row/s]
Latency mean              :   16,8 ms [insert: 16,8 ms]
Latency median            :   16,8 ms [insert: 16,8 ms]
Latency 95th percentile   :   16,8 ms [insert: 16,8 ms]
Latency 99th percentile   :   16,8 ms [insert: 16,8 ms]
Latency 99.9th percentile :   16,8 ms [insert: 16,8 ms]
Latency max               :   16,8 ms [insert: 16,8 ms]
Total partitions          :         10 [insert: 10]
Total errors              :          0 [insert: 0]
Total GC count            : 0
Total GC memory           : 0,000 KiB
Total GC time             :    0,0 seconds
Avg GC time               :    NaN ms
StdDev GC time            :    0,0 ms
Total operation time      : 00:00:00

Improvement over 4 threadCount: -14%
Sleeping for 15s

Running with 16 threadCount
Truncated stresscql_kostya_column_one.t_kostya_one. Sleeping 1s for propagation.
Running [insert, simple1] with 16 threads for 10 iteration
type       total ops,    op/s,    pk/s,   row/s,    mean,     med,     .95,     .99,    .999,     max,   time,   stderr, errors,  gc: #,  max ms,  sum ms,  sdv ms,      mb
total,             1,      72,     724,     724,     9,9,     9,9,     9,9,     9,9,     9,9,     9,9,    0,0,  0,00000,      0,      0,       0,       0,       0,       0


Results:
Op rate                   :       72 op/s  [insert: 72 op/s]
Partition rate            :      724 pk/s  [insert: 724 pk/s]
Row rate                  :      724 row/s [insert: 724 row/s]
Latency mean              :    9,9 ms [insert: 9,9 ms]
Latency median            :    9,9 ms [insert: 9,9 ms]
Latency 95th percentile   :    9,9 ms [insert: 9,9 ms]
Latency 99th percentile   :    9,9 ms [insert: 9,9 ms]
Latency 99.9th percentile :    9,9 ms [insert: 9,9 ms]
Latency max               :    9,9 ms [insert: 9,9 ms]
Total partitions          :         10 [insert: 10]
Total errors              :          0 [insert: 0]
Total GC count            : 0
Total GC memory           : 0,000 KiB
Total GC time             :    0,0 seconds
Avg GC time               :    NaN ms
StdDev GC time            :    0,0 ms
Total operation time      : 00:00:00

Improvement over 8 threadCount: 6254%
Sleeping for 15s

Running with 24 threadCount
Truncated stresscql_kostya_column_one.t_kostya_one. Sleeping 1s for propagation.
Running [insert, simple1] with 24 threads for 10 iteration
type       total ops,    op/s,    pk/s,   row/s,    mean,     med,     .95,     .99,    .999,     max,   time,   stderr, errors,  gc: #,  max ms,  sum ms,  sdv ms,      mb
total,             1,       9,      93,      93,     5,5,     5,5,     5,5,     5,5,     5,5,     5,5,    0,1,  0,00000,      0,      0,       0,       0,       0,       0


Results:
Op rate                   :        9 op/s  [insert: 9 op/s]
Partition rate            :       93 pk/s  [insert: 93 pk/s]
Row rate                  :       93 row/s [insert: 93 row/s]
Latency mean              :    5,5 ms [insert: 5,5 ms]
Latency median            :    5,5 ms [insert: 5,5 ms]
Latency 95th percentile   :    5,5 ms [insert: 5,5 ms]
Latency 99th percentile   :    5,5 ms [insert: 5,5 ms]
Latency 99.9th percentile :    5,5 ms [insert: 5,5 ms]
Latency max               :    5,5 ms [insert: 5,5 ms]
Total partitions          :         10 [insert: 10]
Total errors              :          0 [insert: 0]
Total GC count            : 0
Total GC memory           : 0,000 KiB
Total GC time             :    0,0 seconds
Avg GC time               :    NaN ms
StdDev GC time            :    0,0 ms
Total operation time      : 00:00:00

Improvement over 16 threadCount: -87%
Sleeping for 15s

Running with 36 threadCount
Truncated stresscql_kostya_column_one.t_kostya_one. Sleeping 1s for propagation.
Running [insert, simple1] with 36 threads for 10 iteration
type       total ops,    op/s,    pk/s,   row/s,    mean,     med,     .95,     .99,    .999,     max,   time,   stderr, errors,  gc: #,  max ms,  sum ms,  sdv ms,      mb
total,             1,       5,      46,      46,     5,4,     5,4,     5,4,     5,4,     5,4,     5,4,    0,2,  0,00000,      0,      0,       0,       0,       0,       0


Results:
Op rate                   :        5 op/s  [insert: 5 op/s]
Partition rate            :       46 pk/s  [insert: 46 pk/s]
Row rate                  :       46 row/s [insert: 46 row/s]
Latency mean              :    5,4 ms [insert: 5,4 ms]
Latency median            :    5,4 ms [insert: 5,4 ms]
Latency 95th percentile   :    5,4 ms [insert: 5,4 ms]
Latency 99th percentile   :    5,4 ms [insert: 5,4 ms]
Latency 99.9th percentile :    5,4 ms [insert: 5,4 ms]
Latency max               :    5,4 ms [insert: 5,4 ms]
Total partitions          :         10 [insert: 10]
Total errors              :          0 [insert: 0]
Total GC count            : 0
Total GC memory           : 0,000 KiB
Total GC time             :    0,0 seconds
Avg GC time               :    NaN ms
StdDev GC time            :    0,0 ms
Total operation time      : 00:00:00

Improvement over 24 threadCount: -50%
Sleeping for 15s

Running with 54 threadCount
Truncated stresscql_kostya_column_one.t_kostya_one. Sleeping 1s for propagation.
Running [insert, simple1] with 54 threads for 10 iteration
type       total ops,    op/s,    pk/s,   row/s,    mean,     med,     .95,     .99,    .999,     max,   time,   stderr, errors,  gc: #,  max ms,  sum ms,  sdv ms,      mb
total,             1,       3,      31,      31,     8,4,     8,4,     8,4,     8,4,     8,4,     8,4,    0,3,  0,00000,      0,      0,       0,       0,       0,       0


Results:
Op rate                   :        3 op/s  [insert: 3 op/s]
Partition rate            :       31 pk/s  [insert: 31 pk/s]
Row rate                  :       31 row/s [insert: 31 row/s]
Latency mean              :    8,4 ms [insert: 8,4 ms]
Latency median            :    8,4 ms [insert: 8,4 ms]
Latency 95th percentile   :    8,4 ms [insert: 8,4 ms]
Latency 99th percentile   :    8,4 ms [insert: 8,4 ms]
Latency 99.9th percentile :    8,4 ms [insert: 8,4 ms]
Latency max               :    8,4 ms [insert: 8,4 ms]
Total partitions          :         10 [insert: 10]
Total errors              :          0 [insert: 0]
Total GC count            : 0
Total GC memory           : 0,000 KiB
Total GC time             :    0,0 seconds
Avg GC time               :    NaN ms
StdDev GC time            :    0,0 ms
Total operation time      : 00:00:00

Improvement over 36 threadCount: -32%
Sleeping for 15s
            id, type       total ops,    op/s,    pk/s,   row/s,    mean,     med,     .95,     .99,    .999,     max,   time,   stderr, errors,  gc: #,  max ms,  sum ms,  sdv ms,      mb
 4 threadCount, insert,            1,       1,      13,      13,     6,1,     6,1,     6,1,     6,1,     6,1,     6,1,    0,8,  0,00000,      0,      0,       0,       0,       0,       0
 4 threadCount, total,             1,       1,      13,      13,     6,1,     6,1,     6,1,     6,1,     6,1,     6,1,    0,8,  0,00000,      0,      0,       0,       0,       0,       0
 8 threadCount, insert,            1,       1,      11,      11,    16,8,    16,8,    16,8,    16,8,    16,8,    16,8,    0,9,  0,00000,      0,      0,       0,       0,       0,       0
 8 threadCount, total,             1,       1,      11,      11,    16,8,    16,8,    16,8,    16,8,    16,8,    16,8,    0,9,  0,00000,      0,      0,       0,       0,       0,       0
16 threadCount, insert,            1,      72,     724,     724,     9,9,     9,9,     9,9,     9,9,     9,9,     9,9,    0,0,  0,00000,      0,      0,       0,       0,       0,       0
16 threadCount, total,             1,      72,     724,     724,     9,9,     9,9,     9,9,     9,9,     9,9,     9,9,    0,0,  0,00000,      0,      0,       0,       0,       0,       0
24 threadCount, insert,            1,       9,      93,      93,     5,5,     5,5,     5,5,     5,5,     5,5,     5,5,    0,1,  0,00000,      0,      0,       0,       0,       0,       0
24 threadCount, total,             1,       9,      93,      93,     5,5,     5,5,     5,5,     5,5,     5,5,     5,5,    0,1,  0,00000,      0,      0,       0,       0,       0,       0
36 threadCount, insert,            1,       5,      46,      46,     5,4,     5,4,     5,4,     5,4,     5,4,     5,4,    0,2,  0,00000,      0,      0,       0,       0,       0,       0
36 threadCount, total,             1,       5,      46,      46,     5,4,     5,4,     5,4,     5,4,     5,4,     5,4,    0,2,  0,00000,      0,      0,       0,       0,       0,       0
54 threadCount, insert,            1,       3,      31,      31,     8,4,     8,4,     8,4,     8,4,     8,4,     8,4,    0,3,  0,00000,      0,      0,       0,       0,       0,       0
54 threadCount, total,             1,       3,      31,      31,     8,4,     8,4,     8,4,     8,4,     8,4,     8,4,    0,3,  0,00000,      0,      0,       0,       0,       0,       0
END
lin@lin-pc:~/apps/cassandra$ ^C
lin@lin-pc:~/apps/cassandra$
