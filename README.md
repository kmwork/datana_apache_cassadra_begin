# Рабочие наработки для проектов на Apache Cassandra

Тема выбор модели данных для кассанды под датчики сталеваров

варианты
1 одна таблица, в виде одного столбца — значение и каждый датчик пишется в отдельную строку таблицы. Итог — на несколько миллиаров записей будет — плохо мастабировать

2. одна таблица – все значения по колонкам. Тоже плохо масштабируемая таблица
3. компромисс X таблиц с Y столбцами

Тестирование двух вариантов 1 и 2 на Кассандре-Стресс (Утилита фирменная от Апача) – 
github https://github.com/apache/cassandra/tree/trunk/tools/stress
(входит в поставку бинарника кассандры)

проект тестирования переставлен в 
https://gitlab.dds.lanit.ru/mmk_niokr/tools/-/tree/datana_apache_cassadra_begin


были протестированы варианты на 100 тысяч значений датчиков
если грубо взять 1000 дачников за 1 секунду нужно вычитывать но период 100 секунд ~ 1.5 минуты

тест 1 показал затраты на 100 тыс записей в одноколочной таблице с затратами 1-2 секунды но минус – много GC (мусорщик явы включился в процес – было 1.5Гига мусора после работы код клинского)
папка <this project>/testing/test-2020_04_23/count100K_value_by_record_of_table



тест 2 – выполнил заливку на 100 записей в таблицу из 1000 значений дачиков за 300 милли секунды без активации GC (мусорщика)
папка <this project>/testing/test-2020_04_23/count_100th_big_table_multi_cloumns

###вывод — много столбцов в выигрыше
